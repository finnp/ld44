{"version":3,"sources":["Store.js","components/Game.js","App.js","index.js"],"names":["Context","React","createContext","useStore","useContext","END_OF_DAY","MINUTE_LENGTH","INITIAL_HIRE_COST","HIRE_COST_INCREMENT","BROKERS_PER_MANAGER","INITIAL_HIRE_MANAGER_COST","HIRE_MANAGER_COST_INCREMENT","WORKER_SKILL","MANAGER_SKILL","SKILL_INCREASE_PER_POSSESSION","SHOP","name","price","Store","_ref","children","_useState","useState","_useState2","Object","slicedToArray","day","setDay","_useState3","_useState4","money","setMoney","_useState5","_useState6","time","setTime","_useState7","createWorker","_useState8","workers","setWorkers","_useState9","_useState10","hireCost","setHireCost","_useState11","_useState12","hireManagerCost","setHireManagerCost","_useState13","_useState14","possessions","setPossessions","initialAmount","id","Math","random","type","amount","skill","canHireManager","filter","it","length","useInterval","map","worker","objectSpread","round","react_default","a","createElement","Provider","value","collect","index","i","hire","concat","toConsumableArray","hireManager","managedBrokers","slice","find","broker","reduce","acc","curr","getUpgrade","upgrade","includes","disabled","action","Game","_useStore","date","Date","UTC","GameContainer","FlexContainer","index_es","title","toTimeString","split","join","toLocaleString","FullWidthButton","warning","onClick","Worker","assign","primary","WorkerContainer","BrokerSprite","ManagerSprite","bind","success","styled","div","_templateObject","_templateObject2","_templateObject3","Button","_templateObject4","src","alt","App","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4eaf6a33.chunk.js","sourcesContent":["import React, {useState, useContext} from 'react'\nimport useInterval from 'react-useinterval'\nimport {random} from 'lodash'\n\nconst Context = React.createContext()\n\nexport default function useStore() {\n  return useContext(Context)\n}\n\nexport const END_OF_DAY = 390\nconst MINUTE_LENGTH = 400\nconst INITIAL_HIRE_COST = 10\nconst HIRE_COST_INCREMENT = INITIAL_HIRE_COST\nconst BROKERS_PER_MANAGER = 4\nconst INITIAL_HIRE_MANAGER_COST = BROKERS_PER_MANAGER * INITIAL_HIRE_COST\nconst HIRE_MANAGER_COST_INCREMENT = BROKERS_PER_MANAGER * HIRE_COST_INCREMENT\nconst WORKER_SKILL = BROKERS_PER_MANAGER\nconst MANAGER_SKILL = BROKERS_PER_MANAGER * WORKER_SKILL\nconst SKILL_INCREASE_PER_POSSESSION = 0.2\nconst SHOP = [\n  {\n    name: 'Whip',\n    price: 300,\n  },\n  {\n    name: 'Motivational posters',\n    price: 700\n  },\n  {\n    name: 'Windows XP',\n    price: 5000,\n  },\n  {\n    name: 'Agile seminar',\n    price: 15000,\n  },\n  {\n    name: 'Motivational posters',\n    price: 70000,\n  },\n  {\n    name: 'Whip',\n    price: 150000,\n  },\n  {\n    name: 'Mansion',\n    price: 1000000,\n  }\n]\n\n\nexport function Store ({children}) {\n  const [day, setDay] = useState(1)\n\n  const [money, setMoney] = useState(0)\n\n  const [time, setTime] = useState(0)\n\n  const [workers, setWorkers] = useState([createWorker(100)])\n\n  const [hireCost, setHireCost] = useState(INITIAL_HIRE_COST)\n\n  const [hireManagerCost, setHireManagerCost] = useState(INITIAL_HIRE_MANAGER_COST)\n  \n  const [possessions, setPossessions] = useState([])\n\n\n  function tick() {\n    if (time >= END_OF_DAY) {\n      endDay()\n    } else {\n      setTime(time + 1)\n      setWorkers(workers.map(worker => (\n        {\n          ...worker,\n          amount: (\n            worker.amount + \n            random(1, Math.round((1 + SKILL_INCREASE_PER_POSSESSION * possessions.length) * worker.skill))\n          )\n        }\n      )))\n    }\n  }\n\n  function endDay() {\n    setTime(0)\n    setDay(day + 1)\n  }\n\n  function createWorker(initialAmount) {\n    return {\n      id: Math.random(),\n      type: 'broker',\n      amount: initialAmount || 0,\n      skill: WORKER_SKILL\n    }\n  }\n\n  function createManager(initialAmount) {\n    return {\n      id: Math.random(),\n      type: 'manager',      \n      amount: initialAmount || 0,\n      skill: MANAGER_SKILL\n    }\n  }\n\n  useInterval(tick, MINUTE_LENGTH)\n\n  function collect(index) {\n    setMoney(money + workers[index].amount)\n    setWorkers(workers.map((worker, i) => (\n      {...worker, amount: index === i ? 0 : worker.amount}\n    )))\n  }\n\n  function hire() {\n    if (money >= hireCost) {\n      setMoney(money - hireCost)\n      setWorkers([...workers, createWorker()])\n      setHireCost(hireCost + HIRE_COST_INCREMENT)\n    }\n  }\n\n  function hireManager() {\n    if (canHireManager()) {\n      setMoney(money - hireManagerCost)\n      const managedBrokers = workers.filter(it => it.type === 'broker').slice(0,BROKERS_PER_MANAGER)\n      setWorkers(\n        [\n          ...workers.filter(it => !managedBrokers.find(broker => broker.id === it.id)),\n          createManager(managedBrokers.reduce((acc, curr) => acc + curr.amount, 0))\n        ]\n      )\n      setHireManagerCost(hireManagerCost + HIRE_MANAGER_COST_INCREMENT)\n    }\n  }\n\n  function canHireManager() {\n    return (\n      money >= hireManagerCost &&\n      workers.filter(it => it.type === 'broker').length >= BROKERS_PER_MANAGER\n    )\n  }\n\n  function getUpgrade() {\n    const upgrade = SHOP.find(upgrade => !possessions.includes(upgrade.name))\n\n    if (!upgrade) return\n\n    const disabled = money < upgrade.price\n\n    return {\n      ...upgrade,\n      disabled,\n      action: () => {\n        if (!disabled) {\n          setMoney(money - upgrade.price)\n          setPossessions([upgrade.name, ...possessions])\n        }\n      }\n    }\n  }\n\n\n  return <Context.Provider value={{\n      time,\n      day,\n      money,\n      workers,\n      collect,\n      hire,\n      hireCost,\n      hireManager,\n      hireManagerCost,\n      canHireManager,\n      possessions,\n      getUpgrade,\n    }}>\n    {children}\n  </Context.Provider>\n}\n","import React from 'react'\nimport useStore from '../Store'\nimport {Container, Button, List} from 'nes-react'\nimport styled from 'styled-components'\n\nexport default function Game() {\n  const {\n    time,\n    day,\n    money,\n    workers,\n    hire,\n    hireCost,\n    hireManager,\n    hireManagerCost,\n    canHireManager,\n    possessions,\n    getUpgrade,\n  } = useStore()\n\n  const date = new Date(Date.UTC(2012, 11, 20, 8, 30, 0) + time * 1000 * 60)\n\n  const upgrade = getUpgrade()\n\n  return  (\n    <GameContainer>\n      <FlexContainer>\n        <Container title=\"Time\">\n          Day {day} {date.toTimeString().split(':').slice(0,2).join(':')}\n        </Container>\n        <Container title=\"Money\">\n          ${money.toLocaleString('en-US')}\n        </Container>\n      </FlexContainer>\n      {upgrade && (\n        <Container title=\"Shop\">\n          <FullWidthButton disabled={upgrade.disabled} warning onClick={upgrade.action}>\n            Buy {upgrade.name} ${upgrade.price.toLocaleString('en-US')}\n          </FullWidthButton>\n        </Container>\n      )}\n      <Container title=\"Workforce\">\n        {workers.map((worker, index) => <Worker index={index} {...worker} />)}\n        <FullWidthButton \n          disabled={money < hireCost}\n          onClick={hire}\n          primary\n        >\n          Hire broker ${hireCost.toLocaleString('en-US')}\n        </FullWidthButton>\n        <FullWidthButton \n          disabled={!canHireManager()}\n          onClick={hireManager}\n          primary\n        >\n          Hire manager ${hireManagerCost.toLocaleString('en-US')}\n        </FullWidthButton>\n      </Container>\n      {possessions.length > 0 && (\n        <Container title=\"Upgrades\">\n          <List>\n            {possessions.map(it => <li>{it}</li>)}\n          </List>\n        </Container>\n      )}\n    </GameContainer>\n  )\n}\n\nfunction Worker({amount, index, type}) {\n  const {collect} = useStore()\n\n  return (\n    <WorkerContainer>\n      {type === 'broker' ? <BrokerSprite /> : <ManagerSprite />} \n      ${amount.toLocaleString('en-US')}\n      <Button onClick={collect.bind(null, index)} success>Collect</Button>\n    </WorkerContainer>\n  )\n}\n\nconst GameContainer = styled.div`\n  width: 50vh;\n  margin: 0 auto;\n` \n\nconst FlexContainer = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n`\n\nconst WorkerContainer = styled(FlexContainer)`\n  align-items: center;\n  margin-top: 10px; \n`\n\nconst FullWidthButton = styled(Button)`\n  width: 100%;\n  margin-top: 20px;\n`\n\nfunction BrokerSprite() {\n  return (\n    <img src=\"assets/broker.png\" alt=\"Broker\" />\n  )\n}\n\nfunction ManagerSprite() {\n  return (\n    <img src=\"assets/manager.png\" alt=\"Manager\" />\n  )\n}","import React from 'react'\nimport {Store} from './Store'\nimport Game from './components/Game'\n\nfunction App() {\n\n\n  return (\n    <Store>\n      <Game />\n    </Store>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}